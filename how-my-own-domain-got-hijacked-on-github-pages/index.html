<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>The Great Subdomain Heist - GSociety</title><meta name="description" content="I was deep into an intense Helldivers 2 session when Google Search&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://gsociety.fr/media/plugins/syntaxHighlighter/prism-beige.css"><link rel="stylesheet" href="https://gsociety.fr/media/plugins/syntaxHighlighter/prism-inline-color.css"><script async defer="defer" type="text/javascript" src="https://umami.guis.ch/script.js" data-website-id="362735fb-60a3-4a58-a64d-8d6e22e767b0" data-auto-track="true" data-do-not-track="true" data-cache="false"></script><link rel="canonical" href="https://gsociety.fr/how-my-own-domain-got-hijacked-on-github-pages/"><link rel="alternate" type="application/atom+xml" href="https://gsociety.fr/feed.xml" title="GSociety - RSS"><link rel="alternate" type="application/json" href="https://gsociety.fr/feed.json" title="GSociety - JSON"><meta property="og:title" content="The Great Subdomain Heist"><meta property="og:image" content="https://gsociety.fr/media/posts/2/ChatGPT-Image-22-mai-2025-01_06_22.png"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="1024"><meta property="og:site_name" content="GSociety"><meta property="og:description" content="I was deep into an intense Helldivers 2 session when Google Search&hellip;"><meta property="og:url" content="https://gsociety.fr/how-my-own-domain-got-hijacked-on-github-pages/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@Guisch_"><meta name="twitter:title" content="The Great Subdomain Heist"><meta name="twitter:description" content="I was deep into an intense Helldivers 2 session when Google Search&hellip;"><meta name="twitter:image" content="https://gsociety.fr/media/posts/2/ChatGPT-Image-22-mai-2025-01_06_22.png"><link rel="preload" href="https://gsociety.fr/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://gsociety.fr/assets/css/style.css?v=e45c44ccde83874e1694741c41f3b133"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://gsociety.fr/how-my-own-domain-got-hijacked-on-github-pages/"},"headline":"The Great Subdomain Heist","datePublished":"2025-05-18T23:07+02:00","dateModified":"2025-05-22T23:32+02:00","image":{"@type":"ImageObject","url":"https://gsociety.fr/media/posts/2/ChatGPT-Image-22-mai-2025-01_06_22.png","height":1024,"width":1024},"description":"I was deep into an intense Helldivers 2 session when Google Search&hellip;","author":{"@type":"Person","name":"Guisch","url":"https://gsociety.fr/authors/guisch/"},"publisher":{"@type":"Organization","name":"Guisch"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><style>.extlink::after {
				background-color: currentColor;
				content: "";
				display: inline-block;
				height: 16px;
				margin-left: 5px;
				position: relative;
				top: 0px;
				width: 16px;
			}
		
					.extlink.extlink-icon-1::after {
						mask-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 24 24' fill='none' stroke='%23000000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'><path d='M15 3h6v6'/><path d='M10 14 21 3'/><path d='M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6'/></svg>");
						mask-repeat: no-repeat;
						mask-size: contain;
					}</style><style>.fi{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}</style><style>.li{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}</style></head><body class="post-template"><div id="theme-toggle" class="theme-toggle"><button id="toggle-theme" aria-label="Toggle Theme">üåô / ‚òÄÔ∏è</button></div><script>document.addEventListener('DOMContentLoaded', function () {
  const toggleBtn = document.getElementById('toggle-theme');
  const htmlEl = document.documentElement;

  // Load saved preference
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    htmlEl.classList.add('dark-mode');
  }

  toggleBtn.addEventListener('click', () => {
    const isDark = htmlEl.classList.toggle('dark-mode');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });
});</script><div class="container"><div class="left-bar"><div class="left-bar__inner"><header class="header"><a class="logo" href="https://gsociety.fr/">GSociety</a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle__box"><span class="navbar__toggle__inner">Menu</span></span></button><ul class="navbar__menu"><li><a class="tltp" href="https://gsociety.fr/" target="_self" aria-label="Home"><svg class="fi fi-home" width="24px" height="24px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://gsociety.fr/media/plugins/featherIcons/feather-sprite.svg#home"/></svg> <span>Home</span></a></li><li><a class="tltp" href="https://gsociety.fr/contact/" target="_self" aria-label="Contact"><svg class="fi fi-send" width="24px" height="24px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://gsociety.fr/media/plugins/featherIcons/feather-sprite.svg#send"/></svg> <span>Contact</span></a></li></ul></nav><a class="logo logo--atbottom" href="https://gsociety.fr/">GSociety</a></header></div></div><main class="main post"><article class="content"><figure class="content__featured-image content__featured-image--attop"><img src="https://gsociety.fr/media/posts/2/ChatGPT-Image-22-mai-2025-01_06_22.png" srcset="https://gsociety.fr/media/posts/2/responsive/ChatGPT-Image-22-mai-2025-01_06_22-xs.png 320w, https://gsociety.fr/media/posts/2/responsive/ChatGPT-Image-22-mai-2025-01_06_22-sm.png 480w, https://gsociety.fr/media/posts/2/responsive/ChatGPT-Image-22-mai-2025-01_06_22-md.png 768w, https://gsociety.fr/media/posts/2/responsive/ChatGPT-Image-22-mai-2025-01_06_22-xl.png 1024w" sizes="(min-width: 1460px) 938px, (min-width: 1200px) calc(75.83vw - 154px), (min-width: 1120px) 938px, (min-width: 900px) calc(55vw + 333px), 100vw" loading="eager" height="1024" width="1024" alt="The GitHub octopus fighting on Helldivers 2 environment" aria-describedby="image-caption"></figure><div class="content__meta content__meta--attop"><div class="content__meta--attop__inner"><div class="content__maintag"><svg width="20" height="20" aria-hidden="true" focusable="false"><use xlink:href="https://gsociety.fr/assets/svg/svg-map.svg#tag"/></svg> Published in <a href="https://gsociety.fr/tags/subdomaintakeover/" class="metadata__maintag">subdomaintakeover</a></div></div></div><div class="main__inner"><div class="content__meta"><div class="content__author"><div><a href="https://gsociety.fr/authors/guisch/" class="content__author__name">Guisch</a><p>I‚Äôm Ghislain aka Guisch, a security engineer and hacker at heart. I started GSociety to share raw, real-world security ideas. No fluff, no buzzwords, just lessons that stick. Whether you&#x27;re building your first app or running a growing startup, I write and work to make security make sense.</p></div></div><div class="content__date"><time datetime="2025-05-18T23:07">May 18, 2025</time></div></div><header class="content__header"><h1 class="content__title">The Great Subdomain Heist</h1><p class="content__lead">How I Took Over 4,000 GitHub Pages Domains (And Why GitHub Doesn&#x27;t Care)</p></header><div class="content__entry"><p class="my-0">I was deep into an intense Helldivers 2 session when Google Search Console notifications interrupted my battle against the alien hordes. Someone had claimed ownership of a subdomain I didn't even know existed:¬†<code>ftp.malvetro.corsica</code>.</p><p class="my-0">Within minutes, I went from fighting digital aliens to investigating a real security incident, one that would eventually reveal a massive vulnerability affecting thousands of domains worldwide. More concerning? GitHub knows about it and isn't fixing it.</p><h1 id="the-initial-discovery" class="mb-2 mt-6 text-lg font-[500] first:mt-0 dark:font-[475]">The Initial Discovery</h1><p class="my-0">Opening the suspicious subdomain revealed a gaudy online gambling site plastered across what should have been my family's vacation rental website. My first instinct: someone had compromised my domain registrar account. But the truth turned out to be more insidious.</p><pre class="language-bash"><code>$ dig malvetro.corsica +noall +answer -t A
malvetro.corsica. 442 IN A 185.199.110.153
malvetro.corsica. 442 IN A 185.199.109.153
malvetro.corsica. 442 IN A 185.199.108.153
malvetro.corsica. 442 IN A 185.199.111.153</code></pre><p>Those IP addresses were familiar‚Äîthey belong to GitHub Pages. My root domain (<code>malvetro.corsica</code>) was legitimately pointing there for my GitHub Pages site. But I'd never configured the¬†<code>ftp</code> subdomain. Checking my DNS records at OVH revealed something disturbing:</p><div class="w-full md:max-w-[90vw]"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div class="-mt-xl"><div class="pr-lg"><pre class="language-bash"><code>$ dig ftp.malvetro.corsica +noall +answer -t CNAME
ftp.malvetro.corsica. 430 IN CNAME malvetro.corsica.</code></pre></div></div></div></div><p class="my-0">This CNAME record had been created automatically by my registrar without my knowledge, pointing to my main domain. Since my main domain used GitHub Pages, anyone could claim this subdomain by creating their own GitHub Pages site with the same subdomain in their repository's CNAME file.</p><p class="my-0"><strong>This wasn't a sophisticated hack‚Äîit was a systematic exploitation of common DNS practices, GitHub Pages configuration, and lack of domain verification.</strong></p><h1 id="down-the-rabbit-hole" class="mb-2 mt-6 text-lg font-[500] first:mt-0 dark:font-[475]">Down the Rabbit Hole</h1><p class="my-0">To understand the scope, I needed to see if this was an isolated incident or part of a pattern. Searching GitHub for "HANTUSLOT" (the gambling site name) revealed several repositories using the same template across various subdomains.</p><p class="my-0">But GitHub's search was too limited for a comprehensive analysis. I turned to the GitHub CLI to dig deeper:</p><div class="w-full md:max-w-[90vw]"><div class="codeWrapper text-textMainDark selection:!text-superDark selection:bg-superDuper/10 bg-offset dark:bg-offsetDark my-md relative flex flex-col rounded font-mono text-sm font-thin"><div class="-mt-xl"><div class="text-text-200 bg-background-300 py-xs px-sm inline-block rounded-br rounded-tl-[3px] font-thin"><pre class="language-bash"><code># Search for repo owners with "ftp." in repo names
$ (gh search repos ftp --sort updated --limit 1000 | while read -r repo _; 
   do if [ $(echo "$repo" | grep -E "\/ftp\.") ]; 
      then echo $repo | cut -d/ -f1; 
   fi; done) | sort -u &gt; accounts

# Clone all repositories from these users
$ while read -r user; do 
    gh repo list "$user" --limit 1000 | 
    while read -r repo _; do 
      mkdir -p "$user"; 
      git clone "https://github.com/$repo" "$repo"; 
    done; 
  done &lt; accounts</code></pre></div></div></div></div><p class="my-0">To catch repos that might have been deleted (like the one targeting my domain), I improved the script to mirror-clone repositories and analyze their historical CNAME files:</p><pre class="language-bash"><code># Mirror clone all repos to get full history
$ while read -r user; do 
    gh repo list "$user" --limit 1000 | 
    while read -r repo _; do 
      mkdir -p "$user"; 
      GIT_TERMINAL_PROMPT=0 git clone --mirror "https://github.com/$repo" "$repo.mirror"; 
    done; 
  done &lt; accounts

# Extract all domain additions from CNAME files in git history
$ (TMP=$(pwd); for f in $(find $(pwd) -maxdepth 2 -mindepth 2 -type d); do 
     cd $f; 
     git log -p --follow --all -- CNAME | grep -E "^\+[a-zA-Z0-9]" | sed 's/^+//'; 
   done; 
   cd $TMP;) | sort -u &gt; subdomains

# Analyze frequency of subdomain prefixes
$ cat subdomains | cut -d. -f1 | sort | uniq -c | sort -n
[...]
      5 status
      6 blog
      6 depo10bonus10
      6 depo20bonus20
      6 linkserverinternasional
      6 linkservervietnam
      7 beta
      7 docs
      7 linkserverasia
      7 linkserversensasional
      8 cpanel
      8 test
     13 duit188
     13 whm
     26 webmail
     37 www
     48 mail
   2091 ftp</code></pre><p class="my-0">The results were staggering. The frequency analysis revealed¬†<strong>2091 instances of "ftp" subdomains</strong>¬†being targeted. Other common targets included "mail" (48 instances), "www" (37), "webmail" (26), and other standard subdomains often created by default by domain registrars.</p><h1 id="taking-it-to-the-next-level" class="mb-2 mt-6 text-lg font-[500] first:mt-0 dark:font-[475]">Taking It to The Next Level</h1><p class="my-0">The scale of this vulnerability demanded a more comprehensive approach. I developed a custom tool that:</p><ol class="marker:text-textOff list-decimal"><li><p class="my-0">Used public reverse DNS data to identify all domains and subdomains pointing to GitHub Pages IPs</p></li><li><p class="my-0">Checked which ones could be claimed through GitHub Pages</p></li><li><p class="my-0">Systematically identified vulnerable domains and subdomains</p></li></ol><p class="my-0">The result? I was able to take over approximately¬†<strong>4,000 domains and subdomains</strong>¬†in less than three weeks before GitHub banned my account.</p><p class="my-0">While the ban was technically justified under their Acceptable Use Policy, I hadn't been using these takeovers for malicious purposes. In fact, I redirected affected users to GitHub's documentation on how to regain control of their domains.</p><p class="my-0"><strong>I had already reported this vulnerability to GitHub via HackerOne in March 2024, but their response was dismissive:</strong></p><blockquote><p class="my-0">"We have determined that it is a known issue that does not present a significant security risk. We may make this functionality more strict in the future, but we don't have anythingto announce right now.</p></blockquote><p class="my-0">A year later, in May 2025, nothing has changed.</p><h1 id="why-this-matters-the-anatomy-of-a-subdomain-takeov" class="mb-2 mt-6 text-lg font-[500] first:mt-0 dark:font-[475]">Why This Matters: The Anatomy of a Subdomain Takeover</h1><p class="my-0">The vulnerability pattern follows a predictable flow:</p><ol class="marker:text-textOff list-decimal"><li><p class="my-0"><strong>Domain owner sets up GitHub Pages</strong>¬†for their main domain (e.g.,¬†<code>example.com</code>)</p></li><li><p class="my-0"><strong>Registrar automatically creates additional subdomains</strong>¬†(e.g.,¬†<code>ftp.example.com</code>) with CNAME records pointing to the main domain</p></li><li><p class="my-0"><strong>GitHub allows anyone to claim any subdomain</strong>¬†without verifying ownership or alerting the main domain owner</p></li><li><p class="my-0"><strong>Attackers discover and exploit</strong>¬†these dangling subdomains</p></li></ol><p class="my-0">The worst cases involved wildcard CNAME records that redirected any subdomain to the main domain, making infinite subdomain takeovers possible.</p><h1 id="the-security-implications-are-severe" class="mb-2 mt-6 text-lg font-[500] first:mt-0 dark:font-[475]">The Security Implications Are Severe</h1><p class="my-0">Subdomain takeovers enable attackers to:</p><ol class="marker:text-textOff list-decimal"><li><p class="my-0"><strong>Host malicious content</strong>¬†under your trusted domain</p></li><li><p class="my-0"><strong>Capture cookies</strong>¬†set for your domain</p></li><li><p class="my-0"><strong>Perform cross-site scripting attacks</strong></p></li><li><p class="my-0"><strong>Damage brand reputation</strong>¬†through phishing or scam sites</p></li><li><p class="my-0"><strong>Bypass certain security controls</strong>¬†that trust your domain</p></li></ol><p class="my-0">For organizations using GitHub Pages, this represents a significant, unaddressed security risk hiding in plain sight.</p><h1 id="recommendations-a-shared-responsibility" class="mb-2 mt-6 text-lg font-[500] first:mt-0 dark:font-[475]">Recommendations: A Shared Responsibility</h1><h2 class="mb-xs mt-5 text-base font-[500] first:mt-0 dark:font-[475]">For Domain Owners and Security Teams:</h2><ol class="marker:text-textOff list-decimal"><li><p class="my-0"><strong>Audit all your DNS records</strong>, particularly automatically created subdomains</p></li><li><p class="my-0"><strong>Remove unnecessary CNAME records</strong>¬†pointing to your main domain</p></li><li><p class="my-0"><strong>Set up Google Search Console</strong>¬†with domain verification to be alerted of ownership claims</p></li><li><p class="my-0"><strong>Verify custom domains for GitHub Pages</strong>¬†using GitHub's verification system</p></li><li><p class="my-0"><strong>Monitor for new subdomains</strong>¬†on an ongoing basis</p></li></ol><h2 class="mb-xs mt-5 text-base font-[500] first:mt-0 dark:font-[475]">For GitHub:</h2><ol class="marker:text-textOff list-decimal"><li><p class="my-0"><strong>Implement proper domain verification</strong>¬†before allowing Pages to be published</p></li><li><p class="my-0"><strong>Alert domain owners</strong>¬†when a subdomain of their verified domain is claimed by another user</p></li><li><p class="my-0"><strong>Proactively scan</strong>¬†for and prevent obvious takeover attempts</p></li><li><p class="my-0"><strong>Take vulnerability reports seriously</strong>¬†rather than dismissing documented risks</p></li></ol><h2 class="mb-xs mt-5 text-base font-[500] first:mt-0 dark:font-[475]">For Registrars (like OVH):</h2><ol class="marker:text-textOff list-decimal"><li><p class="my-0"><strong>Stop creating DNS records by default</strong>¬†without clear user notification</p></li><li><p class="my-0"><strong>Warn users</strong>¬†about potential security implications of default subdomain creation</p></li><li><p class="my-0"><strong>Implement verification steps</strong>¬†for subdomain creation</p></li></ol><h1 id="the-big-picture" class="mb-2 mt-6 text-lg font-[500] first:mt-0 dark:font-[475]">The Big Picture</h1><p class="my-0">This issue represents a classic case of responsibility diffusion. GitHub claims it's the domain owners' responsibility to verify their domains. Domain registrars create potentially vulnerable subdomains without warning. Domain owners often don't know what they don't know.</p><p class="my-0">Meanwhile, attackers are systematically exploiting this gap‚ÄîI personally identified and could have maliciously taken over 4,000 domains with minimal effort. The real number of vulnerable domains is likely much higher.</p><p class="my-0">What's most concerning is GitHub's dismissal of the issue as not presenting "a significant security risk," when the evidence clearly suggests otherwise. This highlights a troubling disconnect between security researchers identifying real-world vulnerabilities and platform providers willing to address them.</p><p class="my-0">Until GitHub implements proper verification, the burden falls on security teams to regularly audit their DNS configurations and monitor for subdomain takeovers. Sometimes security isn't about sophisticated zero-days‚Äîit's about checking your DNS records for the digital equivalent of unlocked doors.</p></div><footer class="content__footer"><div class="content__last-updated">This article was updated on <time datetime="2025-05-22T23:32">May 22, 2025</time></div><div class="content__share"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fgsociety.fr%2Fhow-my-own-domain-got-hijacked-on-github-pages%2F&amp;via=Guisch_&amp;text=The%20Great%20Subdomain%20Heist" class="js-share twitter tltp tltp--top" aria-label="Twitter" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://gsociety.fr/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fgsociety.fr%2Fhow-my-own-domain-got-hijacked-on-github-pages%2F" class="js-share linkedin tltp tltp--top" aria-label="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://gsociety.fr/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=The%20Great%20Subdomain%20Heist https%3A%2F%2Fgsociety.fr%2Fhow-my-own-domain-got-hijacked-on-github-pages%2F" class="js-share whatsapp tltp tltp--top" title="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://gsociety.fr/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div></footer></div></article><div class="content__section content__comments"><div class="main__inner"><div class="comments"><div class="comments-wrapper"><h2>Comments</h2><div id="cusdis_thread" data-host="https://cusdis.guis.ch" data-app-id="4d084518-0342-4ab9-a857-a5bae886bac0" data-page-id="2" data-page-url="https://gsociety.fr/how-my-own-domain-got-hijacked-on-github-pages/" data-page-title="The Great Subdomain Heist" data-theme="auto"></div><noscript>Please enable JS to use the comments form.</noscript><div data-gdpr-group="gdpr-blocker/comments" id="cusdis-no-consent-info" style="background: #f0f0f0; border: 1px solid #ccc; border-radius: 5px; color: #666; display: block; padding: 10px; text-align: center; width: 100%;">Comments are disabled because you have not consented to their use. You can change your cookie preferences through the 'cookie banner'.</div><script type="gdpr-blocker/comments">(function () {
				var d = document, s = d.createElement('script');
				s.src = 'https://cusdis.guis.ch/js/cusdis.es.js';
				s.defer = true;
				(d.head || d.body).appendChild(s);
			})();</script><script type="text/javascript">document.body.addEventListener('publii-cookie-banner-unblock-comments', function () {
				document.getElementById('cusdis-no-consent-info').style.display = 'none';
			}, false);</script></div></div></div></div><div class="content__section banner"><div class="main__inner"><script>window.addEventListener('load', function() {
    // Wait for the iframe to be loaded inside the .comment-wrapper div
    const checkIframeLoaded = setInterval(function() {
        if (document.querySelector(".comments-wrapper iframe")) {
            clearInterval(checkIframeLoaded); // Stop checking once iframe is found

            document.querySelector(".comments-wrapper iframe").style.height = document.querySelector(".comments-wrapper iframe").contentWindow.document.documentElement.scrollHeight + 'px';
        }
    }, 100); // Check every 100ms until iframe is found
});</script></div></div></main><div class="right-bar"><div class="right-bar__inner"><div class="sidebar"><section class="box tags"><h3 class="box__title">Recommended Topics</h3><ul class="tags__list"><li class="tags__item"><a href="https://gsociety.fr/tags/bugbounty/" class="btn btn--gray">bugbounty <sup>(1)</sup></a></li><li class="tags__item"><a href="https://gsociety.fr/tags/cybersecurity/" class="btn btn--gray">cybersecurity <sup>(1)</sup></a></li><li class="tags__item"><a href="https://gsociety.fr/tags/dns/" class="btn btn--gray">dns <sup>(1)</sup></a></li><li class="tags__item"><a href="https://gsociety.fr/tags/githubpages/" class="btn btn--gray">githubpages <sup>(1)</sup></a></li><li class="tags__item"><a href="https://gsociety.fr/tags/infosec/" class="btn btn--gray">infosec <sup>(1)</sup></a></li><li class="tags__item"><a href="https://gsociety.fr/tags/subdomaintakeover/" class="btn btn--gray">subdomaintakeover <sup>(1)</sup></a></li></ul></section><div class="box follow"><a href="https://x.com/Guisch_" class="tltp tltp--top" aria-label="Twitter"><svg><use xlink:href="https://gsociety.fr/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="https://www.linkedin.com/in/gsociety/" class="tltp tltp--top" aria-label="LinkedIn"><svg><use xlink:href="https://gsociety.fr/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span></a></div><div class="box copyright">GSociety 2025</div></div></div></div></div><script defer="defer" src="https://gsociety.fr/assets/js/scripts.min.js?v=b2d91bcadbf5db401b76eb5bb3092eb7"></script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script>'use strict'; document.addEventListener('DOMContentLoaded', function() { var obfElements = document.querySelectorAll('.obfuscated-email'); obfElements.forEach(function(elem) { var dataType = elem.getAttribute('data-type'); var encodedEmail = elem.getAttribute('data-email'); var user = elem.getAttribute('data-user'); var domain = elem.getAttribute('data-domain'); var decodedEmail = ''; if (user && domain) { decodedEmail = user.split('').reverse().join('') + '@' + domain.split('').reverse().join(''); } else if (encodedEmail) { const parts = encodedEmail.split('@'); if (parts.length === 2) { decodedEmail = parts[0].split('').reverse().join('') + '@' + parts[1].split('').reverse().join(''); } else { decodedEmail = encodedEmail; } } if (dataType === 'mailto') { var originalText = elem.textContent.trim(); var a = document.createElement('a'); a.href = 'mailto:' + decodedEmail; if (elem.classList.length > 0) { a.className = elem.className; } if (originalText === '') { a.textContent = decodedEmail; } else { a.textContent = originalText; } elem.parentNode.replaceChild(a, elem); } else if (dataType === 'text') { var textNode = document.createTextNode(decodedEmail); elem.parentNode.replaceChild(textNode, elem); } }); });</script><script src="https://gsociety.fr/media/plugins/pagePrefetching/quicklink.umd.js"></script><script>window.addEventListener('load', () => {
					quicklink.listen({
						prerender: true,
						el: document.querySelector('body'),
						delay: 0,
						limit: Infinity,
						throttle: Infinity,
						timeout: 2000
					});
				});</script><script defer="defer" src="https://gsociety.fr/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://gsociety.fr/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://gsociety.fr/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://gsociety.fr/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="https://gsociety.fr/privacy-policy/">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="https://gsociety.fr/privacy-policy/">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title">Analytics (anonymized)</summary><p class="pcb__group__txt">Using Umami selfhosted to track the performance of the website</p></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Analytics (anonymized)</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title">Comments</summary><p class="pcb__group__txt">Using cusdis selfhosted to allow visitors to exchange and comment posts without requiring authentication to external service</p></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="comments" id="comments-cookies"> <label for="comments-cookies">Comments</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('üç™ Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('üç™ Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('üç™ Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('üç™ GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('üç™ Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('üç™ Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>